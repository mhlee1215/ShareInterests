<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="UserSql">

	<resultMap id="User" class="com.si.domain.User">
		<result column="ID" property="id" />
		<result column="NAME" property="name" />
		<result column="EMAIL" property="email" />
 	</resultMap>
 	
 	<select id="readUserList" resultMap="User" parameterClass="com.si.domain.User">
 		SELECT ID, NAME, EMAIL
 		FROM user
 	</select>
 	
	<select id="readUser" resultMap="User">
       SELECT ID, NAME, EMAIL 
       FROM user 
       WHERE EMAIL = #email# 
       <isNotEmpty property="password">
       and PASSWORD = #password#
       </isNotEmpty>
	</select>
 
	<insert id="createUser" parameterClass="com.si.domain.User">
		 INSERT INTO
		 user (NAME, EMAIL, PASSWORD)
		 VALUES (#name#, #email#, #password#)
	</insert>
	
	<update id="updateUser" parameterClass="com.si.domain.User">
		 UPDATE user SET
		 ID = #id#
		 <isNotEmpty property="password">
		 ,PASSWORD = #password#
		 </isNotEmpty>
		 <isNotEmpty property="email">
		 ,EMAIL = #email#
		 </isNotEmpty>
		 WHERE ID = #id# 
	</update>
</sqlMap>


